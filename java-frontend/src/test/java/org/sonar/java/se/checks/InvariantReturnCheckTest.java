/*
 * SonarQube Java
 * Copyright (C) 2012-2017 SonarSource SA
 * mailto:info AT sonarsource DOT com
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
package org.sonar.java.se.checks;

import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;
import org.junit.Test;
import org.sonar.java.bytecode.loader.SquidClassLoader;
import org.sonar.java.se.JavaCheckVerifier;

public class InvariantReturnCheckTest {

  @Test
  public void test() {
    JavaCheckVerifier.verify("src/test/files/se/InvariantReturnCheck.java", new InvariantReturnCheck());
  }

  @Test
  public void xxx() {
    String cpString = "C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.21\\slf4j-api-1.7.21.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\slf4j\\jcl-over-slf4j\\1.7.21\\jcl-over-slf4j-1.7.21.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\slf4j\\log4j-over-slf4j\\1.7.21\\log4j-over-slf4j-1.7.21.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\slf4j\\jul-to-slf4j\\1.7.21\\jul-to-slf4j-1.7.21.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\ch\\qos\\logback\\logback-access\\1.1.7\\logback-access-1.1.7.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.1.7\\logback-classic-1.1.7.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\ch\\qos\\logback\\logback-core\\1.1.7\\logback-core-1.1.7.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\8.5.16\\tomcat-embed-core-8.5.16.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\google\\code\\gson\\gson\\2.3.1\\gson-2.3.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\h2database\\h2\\1.3.176\\h2-1.3.176.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-core\\6.5\\sonar-core-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\codehaus\\sonar\\sonar-classloader\\1.0\\sonar-classloader-1.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-dao\\6.5\\sonar-db-dao-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-core\\6.5\\sonar-db-core-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\commons\\commons-csv\\1.4\\commons-csv-1.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\mybatis\\mybatis\\3.4.4\\mybatis-3.4.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-migration\\6.5\\sonar-db-migration-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-scanner-protocol\\6.5\\sonar-scanner-protocol-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\net\\jpountz\\lz4\\lz4\\1.3.0\\lz4-1.3.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-markdown\\6.5\\sonar-markdown-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-process\\6.5\\sonar-process-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\update-center\\sonar-update-center-common\\1.18.0.487\\sonar-update-center-common-1.18.0.487.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\google\\guava\\guava\\18.0\\guava-18.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-plugin-api\\6.5\\sonar-plugin-api-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\codehaus\\woodstox\\woodstox-core-lgpl\\4.4.0\\woodstox-core-lgpl-4.4.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\codehaus\\woodstox\\stax2-api\\3.1.4\\stax2-api-3.1.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\codehaus\\staxmate\\staxmate\\2.0.1\\staxmate-2.0.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-ce-api\\6.5\\sonar-ce-api-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-beanutils\\commons-beanutils\\1.8.3\\commons-beanutils-1.8.3.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-dbutils\\commons-dbutils\\1.5\\commons-dbutils-1.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\commons\\commons-email\\1.3.2\\commons-email-1.3.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\javax\\mail\\mail\\1.4.5\\mail-1.4.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\javax\\activation\\activation\\1.1.1\\activation-1.1.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-io\\commons-io\\2.4\\commons-io-2.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-lang\\commons-lang\\2.6\\commons-lang-2.6.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\picocontainer\\picocontainer\\2.15\\picocontainer-2.15.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-codec\\commons-codec\\1.8\\commons-codec-1.8.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-dbcp\\commons-dbcp\\1.4\\commons-dbcp-1.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-pool\\commons-pool\\1.5.4\\commons-pool-1.5.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\elasticsearch\\elasticsearch\\2.4.4\\elasticsearch-2.4.4.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-core\\5.5.2\\lucene-core-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-backward-codecs\\5.5.2\\lucene-backward-codecs-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-analyzers-common\\5.5.2\\lucene-analyzers-common-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-queries\\5.5.2\\lucene-queries-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-memory\\5.5.2\\lucene-memory-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-highlighter\\5.5.2\\lucene-highlighter-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-queryparser\\5.5.2\\lucene-queryparser-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-sandbox\\5.5.2\\lucene-sandbox-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-suggest\\5.5.2\\lucene-suggest-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-misc\\5.5.2\\lucene-misc-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-join\\5.5.2\\lucene-join-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-grouping\\5.5.2\\lucene-grouping-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-spatial\\5.5.2\\lucene-spatial-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\apache\\lucene\\lucene-spatial3d\\5.5.2\\lucene-spatial3d-5.5.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\spatial4j\\spatial4j\\0.5\\spatial4j-0.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\elasticsearch\\securesm\\1.0\\securesm-1.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\carrotsearch\\hppc\\0.7.1\\hppc-0.7.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\joda-time\\joda-time\\2.9.5\\joda-time-2.9.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.6.6\\jackson-core-2.6.6.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\dataformat\\jackson-dataformat-smile\\2.8.1\\jackson-dataformat-smile-2.8.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\dataformat\\jackson-dataformat-yaml\\2.8.1\\jackson-dataformat-yaml-2.8.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\dataformat\\jackson-dataformat-cbor\\2.8.1\\jackson-dataformat-cbor-2.8.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\yaml\\snakeyaml\\1.15\\snakeyaml-1.15.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\io\\netty\\netty\\3.10.6.Final\\netty-3.10.6.Final.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\ning\\compress-lzf\\1.0.2\\compress-lzf-1.0.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\tdunning\\t-digest\\3.0\\t-digest-3.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\hdrhistogram\\HdrHistogram\\2.1.6\\HdrHistogram-2.1.6.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-cli\\commons-cli\\1.3.1\\commons-cli-1.3.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\twitter\\jsr166e\\1.1.0\\jsr166e-1.1.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\elasticsearch\\elasticsearch\\2.4.4\\elasticsearch-2.4.4-tests.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\net\\java\\dev\\jna\\jna\\4.1.0\\jna-4.1.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\google\\protobuf\\protobuf-java\\3.0.0-beta-2\\protobuf-java-3.0.0-beta-2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-ws\\6.5\\sonar-ws-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\squareup\\okhttp3\\okhttp\\3.7.0\\okhttp-3.7.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\squareup\\okio\\okio\\1.12.0\\okio-1.12.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\google\\code\\findbugs\\jsr305\\3.0.2\\jsr305-3.0.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-plugin-bridge\\6.5\\sonar-plugin-bridge-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\io\\jsonwebtoken\\jjwt\\0.6.0\\jjwt-0.6.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.6.6\\jackson-databind-2.6.6.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.6.6\\jackson-annotations-2.6.6.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\junit\\junit\\4.12\\junit-4.12.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\hamcrest\\hamcrest-core\\1.3\\hamcrest-core-1.3.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\assertj\\assertj-core\\3.4.1\\assertj-core-3.4.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\assertj\\assertj-guava\\3.0.0\\assertj-guava-3.0.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\mockito\\mockito-core\\1.10.19\\mockito-core-1.10.19.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\objenesis\\objenesis\\2.1\\objenesis-2.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\hamcrest\\hamcrest-all\\1.3\\hamcrest-all-1.3.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-testing\\6.5\\sonar-db-testing-6.5.pom;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-testing-harness\\6.5\\sonar-testing-harness-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\googlecode\\json-simple\\json-simple\\1.1.1\\json-simple-1.1.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-core\\6.5\\sonar-db-core-6.5-tests.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-db-dao\\6.5\\sonar-db-dao-6.5-tests.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\dbunit\\dbunit\\2.4.5\\dbunit-2.4.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\commons-collections\\commons-collections\\3.2.1\\commons-collections-3.2.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\github\\tlrx\\elasticsearch-test\\1.2.1\\elasticsearch-test-1.2.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\tngtech\\java\\junit-dataprovider\\1.9.2\\junit-dataprovider-1.9.2.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\github\\kevinsawicki\\http-request\\5.4.1\\http-request-5.4.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\sonarsource\\sonarqube\\sonar-search\\6.5\\sonar-search-6.5.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\reflections\\reflections\\0.9.9\\reflections-0.9.9.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\javassist\\javassist\\3.18.2-GA\\javassist-3.18.2-GA.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\google\\code\\findbugs\\annotations\\2.0.1\\annotations-2.0.1.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\subethamail\\subethasmtp\\3.1.7\\subethasmtp-3.1.7.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\com\\squareup\\okhttp3\\mockwebserver\\3.7.0\\mockwebserver-3.7.0.jar;C:\\Users\\Tibor Blenessy\\.m2\\repository\\org\\bouncycastle\\bcprov-jdk15on\\1.50\\bcprov-jdk15on-1.50.jar";
    List<File> cp = Arrays.stream(cpString.split(";")).map(File::new).collect(Collectors.toList());
    String file = "C:\\projects\\sonar-java\\its\\sources\\sonarqube-6.5\\server\\sonar-server\\src\\main\\java\\org\\sonar\\server\\computation\\task\\projectanalysis\\qualitymodel\\RatingSettings.java";

    JavaCheckVerifier.verify(file, new InvariantReturnCheck(), cp);
  }
}
